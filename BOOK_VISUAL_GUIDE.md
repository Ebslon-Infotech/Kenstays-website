# Book API - Visual Flow Guide

## ğŸ¯ Complete Booking Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FLIGHT BOOKING WORKFLOW                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Step 1: AUTHENTICATE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Get Token      â”‚  â†’ Valid for 24 hours (until 11:59 PM)
â”‚   (Automatic)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“

Step 2: SEARCH
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Search Flights  â”‚  â†’ Returns: TraceId, Results[]
â”‚  Origin â†’ Dest   â”‚  â†’ Each result has: ResultIndex
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“

Step 3: FARE RULES (Optional)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Get Fare Rules  â”‚  â†’ Cancellation policy
â”‚  Terms & Conds   â”‚  â†’ Refund rules
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“

Step 4: FARE QUOTE
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Get Fare Quote  â”‚  â†’ Accurate pricing
â”‚  Verify Price    â”‚  â†’ IsPassportRequiredAtBook flag
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“

Step 5: SSR (Optional)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Get SSR Options â”‚  â†’ Meals
â”‚  Special Servicesâ”‚  â†’ Seats
â”‚                  â”‚  â†’ Baggage
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“

Step 6: BOOK â­ (Current Implementation)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            BOOK FLIGHT                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Input:                                 â”‚ â”‚
â”‚  â”‚  â€¢ TraceId (from Search)              â”‚ â”‚
â”‚  â”‚  â€¢ ResultIndex (from Search)          â”‚ â”‚
â”‚  â”‚  â€¢ Passengers[] (with details)        â”‚ â”‚
â”‚  â”‚  â€¢ Fare (from FareQuote)              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â†“                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Processing:                            â”‚ â”‚
â”‚  â”‚  1. Validate all passenger data       â”‚ â”‚
â”‚  â”‚  2. Call TekTravels Book API          â”‚ â”‚
â”‚  â”‚  3. Check price/time changes          â”‚ â”‚
â”‚  â”‚  4. Save to database                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                    â†“                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Output:                                â”‚ â”‚
â”‚  â”‚  â€¢ PNR (Booking Reference)            â”‚ â”‚
â”‚  â”‚  â€¢ BookingId                          â”‚ â”‚
â”‚  â”‚  â€¢ Flight Itinerary                   â”‚ â”‚
â”‚  â”‚  â€¢ Last Ticket Date                   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    Decision Point
         â†“
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚         â”‚
    â†“         â†“
Non-LCC    LCC
    â”‚         â”‚
    â†“         â””â”€â†’ Already Ticketed âœ“
Step 7: TICKET
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ticket Booking  â”‚  â†’ Generate invoice
â”‚  Complete Paymentâ”‚  â†’ Confirm booking
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“

Step 8: GET BOOKING DETAILS
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check Status    â”‚  â†’ Verify booking
â”‚  Get Invoice     â”‚  â†’ Download ticket
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Book API Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    BOOK API DATA FLOW                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Frontend                Backend               TekTravels        Database
   â”‚                       â”‚                      â”‚                â”‚
   â”‚   POST /book          â”‚                      â”‚                â”‚
   â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                      â”‚                â”‚
   â”‚   {traceId,           â”‚                      â”‚                â”‚
   â”‚    resultIndex,       â”‚                      â”‚                â”‚
   â”‚    passengers[]}      â”‚                      â”‚                â”‚
   â”‚                       â”‚                      â”‚                â”‚
   â”‚                       â”‚  Validate Request    â”‚                â”‚
   â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚
   â”‚                       â”‚                      â”‚                â”‚
   â”‚                       â”‚  POST /Book          â”‚                â”‚
   â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                â”‚
   â”‚                       â”‚  {passengers, fare}  â”‚                â”‚
   â”‚                       â”‚                      â”‚                â”‚
   â”‚                       â”‚  Check Price/Time    â”‚                â”‚
   â”‚                       â”‚  Generate PNR        â”‚                â”‚
   â”‚                       â”‚  Create Booking      â”‚                â”‚
   â”‚                       â”‚                      â”‚                â”‚
   â”‚                       â”‚  â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                â”‚
   â”‚                       â”‚  {PNR, BookingId,    â”‚                â”‚
   â”‚                       â”‚   FlightItinerary}   â”‚                â”‚
   â”‚                       â”‚                      â”‚                â”‚
   â”‚                       â”‚  Save Booking                         â”‚
   â”‚                       â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
   â”‚                       â”‚  {complete booking data}              â”‚
   â”‚                       â”‚                      â”‚                â”‚
   â”‚  â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                â”‚
   â”‚  {success: true,      â”‚                      â”‚                â”‚
   â”‚   data: {PNR,         â”‚                      â”‚                â”‚
   â”‚          BookingId}}  â”‚                      â”‚                â”‚
   â”‚                       â”‚                      â”‚                â”‚
```

## ğŸ”„ Price Change Scenario

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PRICE CHANGE HANDLING FLOW                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

User Submits Booking
        â†“
   Book API Call
        â†“
TekTravels Check
        â†“
   Price Changed?
        â†“
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”
    â”‚       â”‚
   YES     NO
    â”‚       â”‚
    â†“       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Return New   â”‚      â”‚ Success!       â”‚
â”‚ Price        â”‚      â”‚ Generate PNR   â”‚
â”‚              â”‚      â”‚ Save Booking   â”‚
â”‚ isPriceChangedâ”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ = true       â”‚              â†“
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      Proceed to Ticket
    â†“
Show Warning
to User
    â†“
"Price changed from
$350 to $380"
    â†“
User Confirms?
    â†“
â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
â”‚         â”‚
YES      NO
â”‚         â”‚
â†“         â†“
Rebook   Cancel
with new
price
```

## ğŸ‘¥ Passenger Data Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   PASSENGER OBJECT                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Required Fields (Always)
â”œâ”€â”€ Title â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ "Mr" / "Ms" / "Mrs" / "Master"
â”œâ”€â”€ FirstName â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ "John"
â”œâ”€â”€ LastName â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ "Doe"
â”œâ”€â”€ PaxType â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ 1=Adult, 2=Child, 3=Infant
â”œâ”€â”€ Gender â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ 1=Male, 2=Female
â”œâ”€â”€ Email â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ "john@example.com"
â”œâ”€â”€ ContactNo â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ "1234567890"
â”œâ”€â”€ AddressLine1 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ "123 Main Street"
â”œâ”€â”€ City â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ "New York"
â”œâ”€â”€ CountryCode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ "US"
â”œâ”€â”€ CountryName â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ "United States"
â”œâ”€â”€ IsLeadPax â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ true (at least one)
â”œâ”€â”€ Nationality â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ "US"
â””â”€â”€ Fare â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ {from FareQuote response}

Conditional Fields (Based on Flight)
â”œâ”€â”€ PassportNo â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ If IsPassportRequiredAtBook
â”œâ”€â”€ PassportExpiry â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ If IsPassportRequiredAtBook
â””â”€â”€ PassportIssueDate â”€â”€â”€â”€â”€â”€â”€â”€â†’ If IsPassportFullDetailRequired

Optional Fields
â”œâ”€â”€ DateOfBirth â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Recommended
â”œâ”€â”€ AddressLine2 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Additional address
â”œâ”€â”€ GSTCompanyName â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ For GST invoice
â”œâ”€â”€ GSTNumber â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ GST registration
â”œâ”€â”€ FFAirlineCode â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Frequent flyer program
â”œâ”€â”€ FFNumber â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ FF membership number
â”œâ”€â”€ Meal â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ From SSR selection
â””â”€â”€ Seat â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ From SSR selection
```

## ğŸ¨ Frontend Component Structure

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                FLIGHT BOOKING FORM STRUCTURE                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

BookingPage
    â”‚
    â”œâ”€â”€ SearchForm (Step 1)
    â”‚   â””â”€â”€ Search Button â†’ Get TraceId
    â”‚
    â”œâ”€â”€ FlightResults (Step 2)
    â”‚   â””â”€â”€ Select Flight â†’ ResultIndex
    â”‚
    â”œâ”€â”€ FareDetailsCard (Step 3)
    â”‚   â”œâ”€â”€ Price Breakdown
    â”‚   â”œâ”€â”€ Fare Rules
    â”‚   â””â”€â”€ Get FareQuote Button
    â”‚
    â”œâ”€â”€ SSRSelection (Step 4 - Optional)
    â”‚   â”œâ”€â”€ Meal Options
    â”‚   â”œâ”€â”€ Seat Selection
    â”‚   â””â”€â”€ Baggage Options
    â”‚
    â”œâ”€â”€ PassengerForms (Step 5) â­
    â”‚   â”‚
    â”‚   â”œâ”€â”€ Passenger 1 (Lead)
    â”‚   â”‚   â”œâ”€â”€ Personal Details
    â”‚   â”‚   â”‚   â”œâ”€â”€ Title *
    â”‚   â”‚   â”‚   â”œâ”€â”€ First Name *
    â”‚   â”‚   â”‚   â”œâ”€â”€ Last Name *
    â”‚   â”‚   â”‚   â”œâ”€â”€ Date of Birth
    â”‚   â”‚   â”‚   â””â”€â”€ Gender *
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ Contact Details
    â”‚   â”‚   â”‚   â”œâ”€â”€ Email *
    â”‚   â”‚   â”‚   â”œâ”€â”€ Phone *
    â”‚   â”‚   â”‚   â””â”€â”€ Address *
    â”‚   â”‚   â”‚
    â”‚   â”‚   â”œâ”€â”€ Passport Details (if required)
    â”‚   â”‚   â”‚   â”œâ”€â”€ Passport Number
    â”‚   â”‚   â”‚   â””â”€â”€ Expiry Date
    â”‚   â”‚   â”‚
    â”‚   â”‚   â””â”€â”€ GST Details (optional)
    â”‚   â”‚       â””â”€â”€ Company Info
    â”‚   â”‚
    â”‚   â””â”€â”€ Passenger 2, 3, etc.
    â”‚
    â”œâ”€â”€ PriceSummary
    â”‚   â”œâ”€â”€ Base Fare
    â”‚   â”œâ”€â”€ Taxes
    â”‚   â”œâ”€â”€ SSR Charges
    â”‚   â””â”€â”€ Total
    â”‚
    â””â”€â”€ BookButton â­
        â”œâ”€â”€ onClick: handleBook()
        â”‚   â”œâ”€â”€ Validate Form
        â”‚   â”œâ”€â”€ Call Book API
        â”‚   â”œâ”€â”€ Handle Response
        â”‚   â”‚   â”œâ”€â”€ Success â†’ Confirmation
        â”‚   â”‚   â”œâ”€â”€ Price Changed â†’ Show Warning
        â”‚   â”‚   â””â”€â”€ Error â†’ Show Message
        â”‚   â””â”€â”€ Save to Database
        â”‚
        â””â”€â”€ Redirect to Confirmation
```

## âš¡ Response Decision Tree

```
                    Book API Response
                          â”‚
                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                   â”‚
            Success             Error
           (status=1)         (statusâ‰ 1)
                â”‚                   â”‚
                â”‚                   â””â”€â”€â†’ Show Error
                â”‚                        Try Again
                â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                       â”‚
IsPriceChanged?        IsTimeChanged?
    â”‚                       â”‚
   YESâ”€â”                   YESâ”€â”
    â”‚  â”‚                    â”‚  â”‚
    â”‚  â””â”€â”€â†’ Show Price     â”‚  â””â”€â”€â†’ Show Schedule
    â”‚       Change Warning â”‚       Change Warning
    â”‚       Get Confirmation       Get Confirmation
    â”‚       Update Fare            Update Times
    â”‚       Rebook                 Rebook
    â”‚                       â”‚
   NO                      NO
    â”‚                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
           Save to DB
                â”‚
                â†“
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Non-LCC?   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚
       YES             NO
        â”‚               â”‚
        â†“               â†“
   Proceed to     Already Ticketed
   Ticket API     Show Confirmation
        â”‚               â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
        Show Confirmation
           Page with:
        â€¢ PNR
        â€¢ Booking ID
        â€¢ Flight Details
        â€¢ Last Ticket Date
```

## ğŸš¦ Status Codes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          BOOKING STATUS CODES                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  0 â”‚ NotSet        â”‚ Initial state           â”‚
â”‚  1 â”‚ Successful    â”‚ âœ… Booking confirmed    â”‚
â”‚  2 â”‚ Failed        â”‚ âŒ Booking failed       â”‚
â”‚  3 â”‚ OtherFare     â”‚ Different fare class   â”‚
â”‚  4 â”‚ OtherClass    â”‚ Different cabin class  â”‚
â”‚  5 â”‚ BookedOther   â”‚ Booked on other system â”‚
â”‚  6 â”‚ NotConfirmed  â”‚ Pending confirmation   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ Quick Checklist

```
Before Calling Book API:
  [ ] Have TraceId from Search
  [ ] Have ResultIndex from Search
  [ ] Got FareQuote response
  [ ] Checked IsPassportRequiredAtBook
  [ ] Collected all passenger details
  [ ] Set one passenger as IsLeadPax
  [ ] Using Fare from FareQuote
  [ ] Dates formatted correctly (YYYY-MM-DDTHH:mm:ss)
  [ ] Validated email format
  [ ] Validated phone number

After Booking Success:
  [ ] Save PNR
  [ ] Save Booking ID
  [ ] Note Last Ticket Date
  [ ] Decide next step (Ticket for Non-LCC)
  [ ] Show confirmation to user
  [ ] Send confirmation email (optional)
```

## ğŸ¯ Next Steps Visual

```
     After Successful Booking
              â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
      â”‚               â”‚
   Non-LCC          LCC
      â”‚               â”‚
      â†“               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ticket  â”‚   â”‚  Complete!  â”‚
â”‚   API    â”‚   â”‚  Download   â”‚
â”‚  (Step7) â”‚   â”‚   Ticket    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚               â”‚
      â†“               â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚ Payment  â”‚         â”‚
â”‚ Complete â”‚         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
      â”‚               â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ GetBookingDetailsâ”‚
    â”‚     (Step 8)     â”‚
    â”‚  Verify Status   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
      Show Ticket/Invoice
```

---

**Visual guides help understand the complete flow. Refer to other documentation for implementation details.**
